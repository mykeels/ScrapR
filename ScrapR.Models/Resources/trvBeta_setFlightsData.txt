function camelize(a){return a.replace(/(?:^\w|[A-Z]|\b\w)/g,function(a,b){return 0==b?a.toLowerCase():a.toUpperCase()}).replace(/\s+/g,"")}function setTripData(a,b){if("string"==typeof a&&(a=JSON.parse(a)),$("#"+b+"TripStartAirport").val(a.departureAirportId),$("#"+b+"TripEndAirport").val(a.arrivalAirportId),$('[name="adult"]').val(a.adult||1),a.children&&a.children>0&&$('[name="children"]').val(a.children),a.infant&&a.infant>0&&$('[name="infant"]').val(a.infant),$('[name="flightClass"]').val((a.flightClass||"economy").toLowerCase()),$('[name="departingDate"]').val(a.departingDate),String.IsNullOrEmpty(a.returningDate)||$('[name="returningDate"]').val(a.returningDate),a.multiTrip&&3==a.tripType)for(var c=0;c<a.multiTrip.length;c++){var d=a.multiTrip[c],e=Number(c+1);$('[fieldid="departureAirportCode'+e+'"]').val("city"+e+"A"),$("#departureAirportCode"+e).val(d.departureAirportId),$('[fieldid="destinationAirportCode'+e+'"]').val("city"+e+"B"),$("#destinationAirportCode"+e).val(d.arrivalAirportId),$("#departureDate"+e).val(d.departingDate)}return JSON.stringify(a)}function setOneTripData(a){return"string"==typeof a&&(a=JSON.parse(a)),$("#fromAirportOneTrip .typeahead").val("cityA"),$("#toAirportOneTrip .typeahead").val("cityB"),a.tripType=1,setTripData(a,"one")}function setRoundTripData(a){return"string"==typeof a&&(a=JSON.parse(a)),$("#fromAirportRoundTrip .typeahead").val("cityA"),$("#toAirportRoundTrip .typeahead").val("cityB"),a.tripType=2,setTripData(a,"round")}function setMultiTripData(a){return"string"==typeof a&&(a=JSON.parse(a)),a.tripType=3,setTripData(a,"multi")}function getDefaultQuery(){return JSON.stringify(query)}function submitForm(a){var b=$(a).serializeArray(),c="/flight/asyncflightsearch";return postDataToServer(b,c,function(a){var b=a.message;if("SUCCESS"===a.status){var c="/flight/searchresult";window.location.href=c}else"INFO"===a.status?(alert(b),$("#search-container").removeClass("hide").show()):(alert(b),$("#search-container").removeClass("hide").show());return hideFlightLoadingModal(),!1}),{data:b,url:c}}function submitOneTripForm(){return JSON.stringify(submitForm("#oneTripForm"))}function submitRoundTripForm(){return JSON.stringify(submitForm("#roundTripForm"))}function submitMultipleTripForm(){return JSON.stringify(submitForm("#multipleTripForm"))}function postDataToServer(a,b,c){jQuery.ajax({url:b,type:"POST",data:a,timeout:65e3,dataType:"json",success:function(a){console.log("Data from server: "+JSON.stringify(a)),c(a)},error:function(a){console.error(a);var b={message:"Sorry, unable to process request at the moment.",status:"ERROR"};c(b)}})}function renderUrl(a){return"https://travelbeta.com"+a}function getFlightsInfo(a){var b="object";"string"==typeof a&&(a=JSON.parse(a),b="string");var c=[];return $(".xxnon-stop.subDetail").each(function(){var b=this,d={airline:{imageUrl:renderUrl($(b).find("img").attr("src"))},trips:[],name:$(b).find(".box-title").text(),query:a,price:$(b).find(".price").text(),detailsUrl:renderUrl($(b).find(".button.sky-blue1").attr("href")),totalDuration:$(b).find(".pull-right").text().split(":")[1]||"",departureTime:$(b).find(".pull-right").next().text().split(":").slice(1).join(":")||""};$(this).next().find("article").each(function(){var a={name:$(this).find(".box-title").text(),type:$(this).find(".button.box-title").text(),departureTime:$(this).find(".take-off").text().replace("Take off","")||"",arrivalTime:$(this).find(".landing").text().replace("landing","")||"",duration:$(this).find(".total-time").text().replace("total time","")||"",departureAirport:$(this).find(".detailed-features.booking-details").find(".text-center").not(".tb_to").first().text()||"",arrivalAirport:$(this).find(".detailed-features.booking-details").find(".text-center").not(".tb_to").last().text()||"",details:{}};if($(this).find(".term-description").find("dt").each(function(){a.details[camelize($(this).text().replace(":",""))]=$(this).next().text()||"",d.airline.name=a.details.airline}),$(this).next()[0]&&"DIV"==$(this).next()[0].tagName){var b=$(this).next().text()||"";b.indexOf("LAY-OVER")>=0?a.layOver=b.replace("LAY-OVER :","")||"":b.indexOf("TOTAL FLIGHT TIME")>=0&&(a.totalFlightTime=b.split(":").slice(1).join(":"),d.trips[d.trips.length-1]&&d.query.tripType>=2&&(d.trips[d.trips.length-1].totalFlightTime=b.split(":").slice(1).join(":")))}d.trips.push(a)}),c.push(d)}),"string"==b?JSON.stringify(c):c}String.IsNullOrEmpty=function(a){return null==a||""==a};var query={arrivalAirportId:34979,departureAirportId:35248,adult:1,children:0,infant:0,departingDate:"22/11/2016",returningDate:"24/11/2016",flightClass:"economy",tripType:1,multiTrip:[{arrivalAirportId:34979,departureAirportId:35248,departingDate:"22/11/2016"},{arrivalAirportId:34277,departureAirportId:34979,departingDate:"26/11/2016"}]};